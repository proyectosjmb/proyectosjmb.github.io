<!-- 
    ****************************************************************************
    üü¢ ARCHIVO: research/index.html
    UBICACI√ìN: Carpeta "research"
    
    DESCRIPCI√ìN:
    P√°gina del Laboratorio de Investigaci√≥n.
    NUEVO: Incluye un sistema de "Captura R√°pida" (Inbox) que guarda tus ideas
    en la memoria del navegador (LocalStorage) para que no se pierdan.
    ****************************************************************************
-->

<!DOCTYPE html>
<html lang="es">
<head>
    <!-- ======================================================= -->
    <!-- üü¢ CONFIGURACI√ìN T√âCNICA (HEAD) -->
    <!-- ======================================================= -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Lab | JMB</title>

    <!-- CONEXI√ìN CSS -->
    <link rel="stylesheet" href="../css/style.css">

    <!-- üü¢ ESTILOS EXTRA PARA EL FORMULARIO (CSS INTERNO) -->
    <!-- Ponemos esto aqu√≠ para personalizar los inputs de texto solo en esta p√°gina -->
    <style>
        /* Estilo para el √°rea de captura (Formulario) */
        .input-zone {
            background-color: #1e293b; /* Mismo color que las tarjetas */
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px; /* Separaci√≥n con las tarjetas de abajo */
            border: 1px solid #38bdf8; /* Borde azul para destacar que es interactivo */
        }

        /* Estilo para las cajas de texto (Inputs) */
        .input-field {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            background-color: #0f172a; /* Fondo m√°s oscuro */
            border: 1px solid #334155;
            color: #f8fafc; /* Texto blanco */
            border-radius: 6px;
            font-family: inherit; /* Usa la misma letra que la web */
        }

        /* Estilo especial para el √°rea de texto grande (Textarea) */
        textarea.input-field {
            min-height: 80px; /* Altura m√≠nima */
            resize: vertical; /* Permite estirar la caja */
        }

        /* Bot√≥n de guardar personalizado */
        .btn-save {
            background-color: #38bdf8;
            color: #0f172a;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        .btn-save:hover { background-color: #0ea5e9; }

        /* Estilo para las tarjetas de ideas din√°micas */
        .idea-card {
            background-color: #1e293b;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #38bdf8; /* L√≠nea azul a la izquierda */
            margin-bottom: 15px;
            position: relative; /* Para poder colocar el bot√≥n de borrar */
        }

        /* Bot√≥n peque√±o para borrar ideas (X) */
        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: #ef4444; /* Rojo */
            cursor: pointer;
            font-size: 1.2rem;
        }
        .delete-btn:hover { color: #dc2626; }
        
        /* Links dentro de las notas */
        .idea-content a { color: #38bdf8; text-decoration: underline; }
    </style>
</head>

<body>

    <div class="container">
        
        <!-- BOT√ìN VOLVER -->
        <a href="../index.html" class="back-btn">&larr; Volver al Inicio</a>

        <header>
            <h1>üî¨ Research <span>Lab</span></h1>
            <p class="subtitle">Bandeja de entrada de ideas e investigaciones profundas.</p>
        </header>

        <!-- ======================================================= -->
        <!-- üü¢ SECCI√ìN 1: CAPTURA R√ÅPIDA (INBOX) -->
        <!-- ======================================================= -->
        <div class="input-zone">
            <h3 style="margin-bottom: 15px;">üì• Captura R√°pida de Ideas</h3>
            
            <!-- Entrada del T√≠tulo -->
            <input type="text" id="tituloInput" class="input-field" placeholder="T√≠tulo de la idea (Ej: Video sobre ayuno intermitente...)">
            
            <!-- Entrada de Notas/Links -->
            <textarea id="notaInput" class="input-field" placeholder="Pega aqu√≠ URLs, notas r√°pidas o referencias..."></textarea>
            
            <!-- Bot√≥n que activa la funci√≥n JavaScript -->
            <button onclick="guardarIdea()" class="btn-save">üíæ Guardar en Bandeja</button>
        </div>

        <!-- AQU√ç APARECER√ÅN LAS IDEAS GUARDADAS -->
        <!-- Este div est√° vac√≠o, lo llenaremos con JavaScript din√°micamente -->
        <div id="contenedorIdeas" class="grid" style="margin-bottom: 4rem;">
            <!-- Las tarjetas nuevas se inyectan aqu√≠ -->
        </div>


        <!-- ======================================================= -->
        <!-- üü¢ SECCI√ìN 2: L√çNEAS DE INVESTIGACI√ìN (EST√ÅTICAS) -->
        <!-- ======================================================= -->
        <h2 style="margin-bottom: 20px; border-top: 1px solid #334155; padding-top: 20px;">üóÇÔ∏è Archivos de Investigaci√≥n</h2>
        
        <div class="grid">
            
            <!-- CARD 1: SALUD -->
            <a href="#" class="card">
                <div>
                    <h3>üåø Salud & Biohacking</h3>
                    <p>Protocolos de optimizaci√≥n f√≠sica.</p>
                    <ul style="margin-top: 10px; padding-left: 20px; color: #94a3b8; font-size: 0.85rem;">
                        <li>Aumentar Testosterona & Alimentaci√≥n Consciente</li>
                        <li>Investigaci√≥n Resveratrol</li>
                        <li>Or√©gano, Disbiosis y Herbolaria</li>
                    </ul>
                </div>
                <span class="tag">Leer Notas üìÑ</span>
            </a>

            <!-- CARD 2: SOCIEDAD -->
            <a href="#" class="card">
                <div>
                    <h3>‚öñÔ∏è Sociedad y Econom√≠a</h3>
                    <p>An√°lisis sobre Riqueza, Trabajo y Desigualdad.</p>
                </div>
                <span class="tag">Leer Ensayos üìÑ</span>
            </a>

            <!-- CARD 3: ENERG√çA -->
            <a href="#" class="card">
                <div>
                    <h3>üîÆ Energ√≠a & Herramientas</h3>
                    <p>Estudios sobre varillas de radiestesia y energ√≠as sutiles.</p>
                </div>
                <span class="tag">Ver Investigaci√≥n üìÑ</span>
            </a>

        </div> <!-- Fin Grid Est√°tica -->

    </div> <!-- Fin Container -->


    <!-- ======================================================= -->
    <!-- üü¢ CEREBRO JAVASCRIPT: L√ìGICA DE GUARDADO -->
    <!-- ======================================================= -->
    <script>
        // 1. AL CARGAR LA P√ÅGINA: Recuperar lo que ya ten√≠amos guardado
        document.addEventListener('DOMContentLoaded', cargarIdeas);

        function guardarIdea() {
            // A. OBTENER DATOS: Sacamos lo que escribiste en las cajas
            const titulo = document.getElementById('tituloInput').value;
            const nota = document.getElementById('notaInput').value;

            // B. VALIDACI√ìN: Si no hay t√≠tulo, rega√±amos al usuario
            if (titulo === "") {
                alert("‚ö†Ô∏è ¬°Escribe al menos un t√≠tulo para la idea!");
                return;
            }

            // C. CREAR OBJETO: Empaquetamos la informaci√≥n en un paquete ordenado
            const nuevaIdea = {
                id: Date.now(), // Usamos la hora exacta como ID √∫nico
                titulo: titulo,
                nota: nota,
                fecha: new Date().toLocaleDateString() // Guardamos la fecha de hoy
            };

            // D. GUARDAR EN MEMORIA (LocalStorage)
            // 1. Bajamos la lista actual de ideas (o creamos una vac√≠a si no hay)
            let listaIdeas = JSON.parse(localStorage.getItem('misIdeasResearch') || '[]');
            // 2. Agregamos la nueva al principio
            listaIdeas.unshift(nuevaIdea);
            // 3. Guardamos la lista actualizada en el navegador
            localStorage.setItem('misIdeasResearch', JSON.stringify(listaIdeas));

            // E. LIMPIEZA VISUAL
            document.getElementById('tituloInput').value = ""; // Borrar caja t√≠tulo
            document.getElementById('notaInput').value = "";   // Borrar caja nota
            
            // F. ACTUALIZAR PANTALLA
            cargarIdeas(); // Volver a dibujar las tarjetas
        }

        function cargarIdeas() {
            // 1. OBTENER LISTA DE MEMORIA
            let listaIdeas = JSON.parse(localStorage.getItem('misIdeasResearch') || '[]');
            const contenedor = document.getElementById('contenedorIdeas');
            
            // 2. LIMPIAR PANTALLA (Para no duplicar al recargar)
            contenedor.innerHTML = "";

            // 3. DIBUJAR CADA IDEA
            listaIdeas.forEach(idea => {
                // Creamos el HTML de la tarjeta
                // Nota: Convertimos los saltos de l√≠nea (\n) en etiquetas <br> para que se vean bien
                let notaConFormatos = idea.nota.replace(/\n/g, "<br>");
                
                // Si la nota contiene "http", intentamos hacerla clicable (b√°sico)
                // (Para simplificar, aqu√≠ solo mostramos el texto, pero el usuario puede copiar/pegar)
                
                const tarjetaHTML = `
                    <div class="idea-card">
                        <button onclick="borrarIdea(${idea.id})" class="delete-btn" title="Borrar">√ó</button>
                        <h3 style="color: #f8fafc; margin-bottom: 5px;">${idea.titulo}</h3>
                        <small style="color: #64748b;">üìÖ ${idea.fecha}</small>
                        <p style="color: #94a3b8; margin-top: 10px; word-break: break-word;" class="idea-content">
                            ${notaConFormatos}
                        </p>
                    </div>
                `;
                
                // Insertamos la tarjeta en el contenedor
                contenedor.innerHTML += tarjetaHTML;
            });
        }

        function borrarIdea(id) {
            if(confirm("¬øYa procesaste esta idea? Se eliminar√° de la lista.")) {
                // 1. BAJAR LISTA
                let listaIdeas = JSON.parse(localStorage.getItem('misIdeasResearch') || '[]');
                // 2. FILTRAR (Dejar todas MENOS la que tiene ese ID)
                listaIdeas = listaIdeas.filter(idea => idea.id !== id);
                // 3. GUARDAR LISTA NUEVA
                localStorage.setItem('misIdeasResearch', JSON.stringify(listaIdeas));
                // 4. REFLEJAR CAMBIOS
                cargarIdeas();
            }
        }
    </script>

</body>
</html>
